# ä¾èµ–æ›´æ–°æŒ‡å—

## ğŸ“‹ å½“å‰çŠ¶æ€

é¡¹ç›®å½“å‰æœ‰28ä¸ªä¾èµ–åŒ…å¯ä»¥æ›´æ–°åˆ°æ›´æ–°ç‰ˆæœ¬ï¼Œå…¶ä¸­åŒ…æ‹¬ä¸€äº›å…³é”®çš„å®‰å…¨å’ŒåŠŸèƒ½æ›´æ–°ã€‚

## ğŸ”§ æ¨èçš„ä¾èµ–æ›´æ–°

### é«˜ä¼˜å…ˆçº§æ›´æ–°ï¼ˆå»ºè®®ç«‹å³æ›´æ–°ï¼‰

```yaml
dependencies:
  # è·¯ç”±å¯¼èˆª - é‡è¦åŠŸèƒ½æ›´æ–°å’Œbugä¿®å¤
  go_router: ^16.2.0  # ä» 12.1.3 æ›´æ–°ï¼ŒåŒ…å«é‡è¦çš„è·¯ç”±å¤„ç†æ”¹è¿›
  
  # ä¾èµ–æ³¨å…¥ - æ€§èƒ½ä¼˜åŒ–
  get_it: ^8.2.0  # ä» 7.7.0 æ›´æ–°ï¼ŒåŒ…å«æ€§èƒ½æ”¹è¿›
  
  # ç½‘ç»œå’Œè®¾å¤‡ä¿¡æ¯ - å®‰å…¨æ›´æ–°
  connectivity_plus: ^6.1.5  # ä» 5.0.2 æ›´æ–°
  device_info_plus: ^11.5.0  # ä» 9.1.2 æ›´æ–°
  package_info_plus: ^8.3.1  # ä» 4.2.0 æ›´æ–°

dev_dependencies:
  # ä»£ç è´¨é‡å·¥å…· - é‡è¦æ›´æ–°
  very_good_analysis: ^9.0.0  # ä» 5.1.0 æ›´æ–°ï¼ŒåŒ…å«æ–°çš„ä»£ç æ£€æŸ¥è§„åˆ™
  flutter_lints: ^6.0.0      # ä» 3.0.2 æ›´æ–°
  build_runner: ^2.7.0       # ä» 2.5.4 æ›´æ–°
  
  # ä»£ç ç”Ÿæˆå·¥å…·
  freezed: ^3.2.0            # ä» 3.1.0 æ›´æ–°
  json_serializable: ^6.10.0 # ä» 6.9.5 æ›´æ–°
```

### ä¸­ä¼˜å…ˆçº§æ›´æ–°

```yaml
dependencies:
  # åŠ¨ç”»å’ŒUI
  lottie: ^3.3.1  # ä» 2.7.0 æ›´æ–°ï¼Œæ”¯æŒæ›´å¤šåŠ¨ç”»æ ¼å¼

dev_dependencies:
  # æµ‹è¯•å·¥å…·
  bloc_test: ^10.0.0  # ä» 9.1.7 æ›´æ–°
  mockito: ^5.5.0     # ä» 5.4.6 æ›´æ–°
  custom_lint: ^0.8.0 # ä» 0.7.6 æ›´æ–°
```

### éœ€è¦ç§»é™¤çš„åºŸå¼ƒä¾èµ–

```yaml
# ç§»é™¤å·²åºŸå¼ƒçš„åŒ…
# jsåŒ…å·²è¢«åºŸå¼ƒï¼Œæ£€æŸ¥æ˜¯å¦è¢«å…¶ä»–åŒ…ä¼ é€’ä¾èµ–
```

## ğŸ“ æ›´æ–°æ­¥éª¤

### 1. å¤‡ä»½å½“å‰é…ç½®

```bash
# å¤‡ä»½å½“å‰çš„pubspec.lock
cp pubspec.lock pubspec.lock.backup
```

### 2. æ›´æ–°pubspec.yaml

æ‰‹åŠ¨æ›´æ–°ä¸Šè¿°ä¾èµ–ç‰ˆæœ¬åˆ°pubspec.yamlæ–‡ä»¶ä¸­ã€‚

### 3. æ¸…ç†å’Œé‡æ–°å®‰è£…

```bash
# æ¸…ç†é¡¹ç›®
flutter clean

# è·å–æœ€æ–°ä¾èµ–
flutter pub get

# æ£€æŸ¥ä¾èµ–å†²çª
flutter pub deps
```

### 4. é‡æ–°ç”Ÿæˆä»£ç 

```bash
# æ¸…ç†ç”Ÿæˆçš„ä»£ç 
dart run build_runner clean

# é‡æ–°ç”Ÿæˆæ‰€æœ‰ä»£ç 
dart run build_runner build --delete-conflicting-outputs
```

### 5. è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•ç¡®ä¿æ›´æ–°ååŠŸèƒ½æ­£å¸¸
flutter test

# è¿è¡Œé›†æˆæµ‹è¯•
flutter test integration_test/
```

### 6. æ£€æŸ¥å…¼å®¹æ€§

```bash
# æ£€æŸ¥ä»£ç åˆ†æ
flutter analyze

# æ£€æŸ¥æ ¼å¼
dart format --set-exit-if-changed lib/ test/
```

## âš ï¸ æ›´æ–°æ³¨æ„äº‹é¡¹

### GoRouter 16.x é‡å¤§å˜æ›´

- è·¯ç”±é…ç½®APIå¯èƒ½æœ‰å˜åŒ–
- éœ€è¦æ£€æŸ¥è·¯ç”±å®ˆå«çš„å®ç°
- éªŒè¯åµŒå¥—è·¯ç”±çš„å·¥ä½œæ˜¯å¦æ­£å¸¸

### GetIt 8.x å˜æ›´

- æ€§èƒ½ä¼˜åŒ–ï¼Œå‘åå…¼å®¹
- æ–°å¢äº†ä¸€äº›ä¾¿æ·æ–¹æ³•
- é”™è¯¯å¤„ç†æœ‰æ‰€æ”¹è¿›

### Very Good Analysis 9.x

- æ–°å¢äº†æ›´å¤šä»£ç æ£€æŸ¥è§„åˆ™
- å¯èƒ½ä¼šå‘ç°ä¹‹å‰æœªæ£€æµ‹åˆ°çš„é—®é¢˜
- å»ºè®®é€æ­¥ä¿®å¤æ–°çš„è­¦å‘Š

## ğŸ” éªŒè¯æ¸…å•

æ›´æ–°å®Œæˆåï¼Œè¯·éªŒè¯ä»¥ä¸‹åŠŸèƒ½ï¼š

- [ ] åº”ç”¨æ­£å¸¸å¯åŠ¨
- [ ] è·¯ç”±å¯¼èˆªæ­£å¸¸å·¥ä½œ
- [ ] ç”¨æˆ·ç™»å½•/æ³¨å†ŒåŠŸèƒ½æ­£å¸¸
- [ ] ä¸»é¢˜åˆ‡æ¢åŠŸèƒ½æ­£å¸¸
- [ ] è¯­è¨€åˆ‡æ¢åŠŸèƒ½æ­£å¸¸
- [ ] ç½‘ç»œè¯·æ±‚æ­£å¸¸å·¥ä½œ
- [ ] æœ¬åœ°å­˜å‚¨åŠŸèƒ½æ­£å¸¸
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] ä»£ç åˆ†ææ— é”™è¯¯

## ğŸ“Š æ›´æ–°æ•ˆç›Š

### æ€§èƒ½æå‡

- è·¯ç”±å¯¼èˆªæ€§èƒ½æ”¹è¿›
- ä¾èµ–æ³¨å…¥æ•ˆç‡æå‡
- æ„å»ºé€Ÿåº¦ä¼˜åŒ–

### å®‰å…¨æ€§

- ä¿®å¤å·²çŸ¥çš„å®‰å…¨æ¼æ´
- æ›´å¥½çš„ç½‘ç»œè¿æ¥å¤„ç†
- æ”¹è¿›çš„é”™è¯¯å¤„ç†

### å¼€å‘ä½“éªŒ

- æ›´å¥½çš„ä»£ç æ£€æŸ¥è§„åˆ™
- æ”¹è¿›çš„å¼€å‘å·¥å…·
- æ›´å¿«çš„çƒ­é‡è½½

## ğŸš€ è‡ªåŠ¨åŒ–æ›´æ–°è„šæœ¬

å¯ä»¥åˆ›å»ºä¸€ä¸ªè„šæœ¬æ¥è‡ªåŠ¨åŒ–æ›´æ–°è¿‡ç¨‹ï¼š

```bash
#!/bin/bash
# scripts/update_dependencies.sh

echo "ğŸ”„ å¼€å§‹æ›´æ–°ä¾èµ–..."

# 1. å¤‡ä»½
cp pubspec.lock pubspec.lock.backup
echo "âœ… å¤‡ä»½å®Œæˆ"

# 2. æ¸…ç†
flutter clean
echo "âœ… æ¸…ç†å®Œæˆ"

# 3. æ›´æ–°ä¾èµ–
flutter pub upgrade --major-versions
echo "âœ… ä¾èµ–æ›´æ–°å®Œæˆ"

# 4. é‡æ–°ç”Ÿæˆä»£ç 
dart run build_runner clean
dart run build_runner build --delete-conflicting-outputs
echo "âœ… ä»£ç ç”Ÿæˆå®Œæˆ"

# 5. è¿è¡Œæµ‹è¯•
flutter test
echo "âœ… æµ‹è¯•å®Œæˆ"

# 6. ä»£ç åˆ†æ
flutter analyze
echo "âœ… ä»£ç åˆ†æå®Œæˆ"

echo "ğŸ‰ ä¾èµ–æ›´æ–°å®Œæˆï¼"
```

## ğŸ“ æ”¯æŒ

å¦‚æœåœ¨æ›´æ–°è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼š

1. æ£€æŸ¥Flutterå’ŒDart SDKç‰ˆæœ¬æ˜¯å¦æ»¡è¶³è¦æ±‚
2. æŸ¥çœ‹ä¾èµ–åŒ…çš„CHANGELOGäº†è§£é‡å¤§å˜æ›´
3. åœ¨é¡¹ç›®Issuesä¸­æœç´¢ç›¸å…³é—®é¢˜
4. å¿…è¦æ—¶å¯ä»¥å›æ»šåˆ°å¤‡ä»½çš„pubspec.lock

---

*æœ€åæ›´æ–°ï¼š2024å¹´12æœˆ*
